const Discord = require("discord.js");
const db = require("quick.db");
const fs = require("fs");

module.exports = {
  name: "log",
  category: "Rp",
  description: "Crée une backup de l'économie actuelle du serveur [Staff Only]",
  usage: "e/xp [@user]",
  statut: "on",
  run: async (client, message, args) => {
    const PermEmbed = new Discord.RichEmbed()
      .setColor("RED")
      .setDescription(
        "Vous n'avez pas l'autorisation de faire ça, bien tenté ! <:no:648627916317392936>"
      )
      .setAuthor(message.author.tag, message.author.displayAvatarURL)
      .setTimestamp()
      .setFooter("ÉclaryBOT", message.guild.iconURL);

    if (!message.member.hasPermission("ADMINISTRATOR"))
      return message.channel.send(PermEmbed);
    let html = Buffer.from(
      "PCFET0NUWVBFIGh0bWw+CjxodG1sPgoKPGhlYWQ+CiAgICA8dGl0bGU+Y2xhcnkgfCBWNCAtIGNsb3NlZC0wMDc5PC90aXRsZT4KICAgIDxtZXRhIGNoYXJzZXQ9dXRmLTg+CiAgICA8bWV0YSBuYW1lPXZpZXdwb3J0IGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCI+CiAgICA8c3R5bGU+CiAgICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBXaGl0bmV5OwogICAgICAgICAgICBzcmM6IHVybChodHRwczovL2Rpc2NvcmRhcHAuY29tL2Fzc2V0cy82YzYzNzRiYWQwYjBiNmQyMDRkOGQ2ZGM0YTE4ZDgyMC53b2ZmKTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDMwMAogICAgICAgIH0KICAgICAgICAKICAgICAgICBAZm9udC1mYWNlIHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IFdoaXRuZXk7CiAgICAgICAgICAgIHNyYzogdXJsKGh0dHBzOi8vZGlzY29yZGFwcC5jb20vYXNzZXRzL2U4YWNkN2Q5YmY2MjA3Zjk5MzUwY2E5ZjllMjNiMTY4LndvZmYpOwogICAgICAgICAgICBmb250LXdlaWdodDogNDAwCiAgICAgICAgfQogICAgICAgIAogICAgICAgIEBmb250LWZhY2UgewogICAgICAgICAgICBmb250LWZhbWlseTogV2hpdG5leTsKICAgICAgICAgICAgc3JjOiB1cmwoaHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9hc3NldHMvM2JkZWYxMjUxYTQyNDUwMGMxYjNhNzhkZWE5YjdlNTcud29mZik7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgQGZvbnQtZmFjZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBXaGl0bmV5OwogICAgICAgICAgICBzcmM6IHVybChodHRwczovL2Rpc2NvcmRhcHAuY29tL2Fzc2V0cy9iZTAwNjBkYWZiN2EwZTMxZDJhMWNhMTdjMDcwODYzNi53b2ZmKTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMAogICAgICAgIH0KICAgICAgICAKICAgICAgICBAZm9udC1mYWNlIHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6IFdoaXRuZXk7CiAgICAgICAgICAgIHNyYzogdXJsKGh0dHBzOi8vZGlzY29yZGFwcC5jb20vYXNzZXRzLzhlMTJmYjRmMTRkOWM0NTkyZWI4ZWM5ZjIyMzM3YjA0LndvZmYpOwogICAgICAgICAgICBmb250LXdlaWdodDogNzAwCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogV2hpdG5leSwgIkhlbHZldGljYSBOZXVlIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgZm9udC1zaXplOiAxN3B4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGEgewogICAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYTpob3ZlciB7CiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGltZyB7CiAgICAgICAgICAgIG9iamVjdC1maXQ6IGNvbnRhaW4KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLm1hcmtkb3duIHsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOwogICAgICAgICAgICBsaW5lLWhlaWdodDogMS4zOwogICAgICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5zcG9pbGVyIHsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5xdW90ZSB7CiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgbWFyZ2luOiA4cHggMDsKICAgICAgICAgICAgcGFkZGluZy1sZWZ0OiAxMHB4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5wcmUgewogICAgICAgICAgICBmb250LWZhbWlseTogQ29uc29sYXMsICJDb3VyaWVyIE5ldyIsIENvdXJpZXIsIG1vbm9zcGFjZQogICAgICAgIH0KICAgICAgICAKICAgICAgICAucHJlLS1tdWx0aWxpbmUgewogICAgICAgICAgICBtYXJnaW4tdG9wOiA0cHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDhweDsKICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQ7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAucHJlLS1pbmxpbmUgewogICAgICAgICAgICBwYWRkaW5nOiAycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgZm9udC1zaXplOiA4NSUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLm1lbnRpb24gewogICAgICAgICAgICBmb250LXdlaWdodDogNTAwCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5lbW9qaSB7CiAgICAgICAgICAgIHdpZHRoOiAxLjQ1ZW07CiAgICAgICAgICAgIGhlaWdodDogMS40NWVtOwogICAgICAgICAgICBtYXJnaW46IDAgMXB4OwogICAgICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogLS40ZW0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmVtb2ppLS1zbWFsbCB7CiAgICAgICAgICAgIHdpZHRoOiAxcmVtOwogICAgICAgICAgICBoZWlnaHQ6IDFyZW0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmVtb2ppLS1sYXJnZSB7CiAgICAgICAgICAgIHdpZHRoOiAycmVtOwogICAgICAgICAgICBoZWlnaHQ6IDJyZW0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmluZm8gewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbjogMCA1cHggMTBweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5mb19fZ3VpbGQtaWNvbi1jb250YWluZXIgewogICAgICAgICAgICBmbGV4OiAwCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbmZvX19ndWlsZC1pY29uIHsKICAgICAgICAgICAgbWF4LXdpZHRoOiA4OHB4OwogICAgICAgICAgICBtYXgtaGVpZ2h0OiA4OHB4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbmZvX19tZXRhZGF0YSB7CiAgICAgICAgICAgIGZsZXg6IDE7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbmZvX19ndWlsZC1uYW1lIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxLjRlbQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5mb19fY2hhbm5lbC1uYW1lIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxLjJlbQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5mb19fY2hhbm5lbC10b3BpYyB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDJweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5mb19fY2hhbm5lbC1tZXNzYWdlLWNvdW50IHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogMnB4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbmZvX19jaGFubmVsLWRhdGUtcmFuZ2UgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAycHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2cgewogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDI0cHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX21lc3NhZ2UtZ3JvdXAgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBtYXJnaW46IDAgMTBweDsKICAgICAgICAgICAgcGFkZGluZzogMTVweCAwOwogICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2F1dGhvci1hdmF0YXItY29udGFpbmVyIHsKICAgICAgICAgICAgZmxleDogMDsKICAgICAgICAgICAgd2lkdGg6IDQwcHg7CiAgICAgICAgICAgIGhlaWdodDogNDBweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fYXV0aG9yLWF2YXRhciB7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgaGVpZ2h0OiA0MHB4OwogICAgICAgICAgICB3aWR0aDogNDBweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fbWVzc2FnZXMgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBtaW4td2lkdGg6IDUwJTsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2F1dGhvci1uYW1lIHsKICAgICAgICAgICAgZm9udC1zaXplOiAxZW07CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX3RpbWVzdGFtcCB7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogLjc1ZW0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX21lc3NhZ2UgewogICAgICAgICAgICBwYWRkaW5nOiAycHggNXB4OwogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IC01cHg7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtNXB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAxcyBlYXNlCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19jb250ZW50IHsKICAgICAgICAgICAgZm9udC1zaXplOiAuOTM3NWVtOwogICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VkaXRlZC10aW1lc3RhbXAgewogICAgICAgICAgICBtYXJnaW4tbGVmdDogM3B4OwogICAgICAgICAgICBmb250LXNpemU6IC44ZW0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2F0dGFjaG1lbnQtdGh1bWJuYWlsIHsKICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4OwogICAgICAgICAgICBtYXgtd2lkdGg6IDUwJTsKICAgICAgICAgICAgbWF4LWhlaWdodDogNTAwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQgewogICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIG1heC13aWR0aDogNTIwcHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWNvbG9yLXBpbGwgewogICAgICAgICAgICBmbGV4LXNocmluazogMDsKICAgICAgICAgICAgd2lkdGg6IDRweDsKICAgICAgICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogM3B4OwogICAgICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAzcHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWNvbnRlbnQtY29udGFpbmVyIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgcGFkZGluZzogOHB4IDEwcHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkOwogICAgICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogM3B4OwogICAgICAgICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogM3B4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1jb250ZW50IHsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLXRleHQgewogICAgICAgICAgICBmbGV4OiAxCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1hdXRob3IgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWF1dGhvci1pY29uIHsKICAgICAgICAgICAgd2lkdGg6IDIwcHg7CiAgICAgICAgICAgIGhlaWdodDogMjBweDsKICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA5cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtYXV0aG9yLW5hbWUgewogICAgICAgICAgICBmb250LXNpemU6IC44NzVlbTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtdGl0bGUgewogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogLjg3NWVtOwogICAgICAgICAgICBmb250LXdlaWdodDogNjAwCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1kZXNjcmlwdGlvbiB7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtZmllbGRzIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC13cmFwOiB3cmFwCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1maWVsZCB7CiAgICAgICAgICAgIGZsZXg6IDA7CiAgICAgICAgICAgIG1pbi13aWR0aDogMTAwJTsKICAgICAgICAgICAgbWF4LXdpZHRoOiA1MDZweDsKICAgICAgICAgICAgcGFkZGluZy10b3A6IDEwcHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWZpZWxkLS1pbmxpbmUgewogICAgICAgICAgICBmbGV4OiAxOwogICAgICAgICAgICBmbGV4LWJhc2lzOiBhdXRvOwogICAgICAgICAgICBtaW4td2lkdGg6IDE1MHB4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1maWVsZC1uYW1lIHsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHB4OwogICAgICAgICAgICBmb250LXNpemU6IC44NzVlbTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtZmllbGQtdmFsdWUgewogICAgICAgICAgICBmb250LXNpemU6IC44NzVlbTsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtdGh1bWJuYWlsIHsKICAgICAgICAgICAgZmxleDogMDsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7CiAgICAgICAgICAgIG1heC13aWR0aDogODBweDsKICAgICAgICAgICAgbWF4LWhlaWdodDogODBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1pbWFnZS1jb250YWluZXIgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19lbWJlZC1pbWFnZSB7CiAgICAgICAgICAgIG1heC13aWR0aDogNTAwcHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDQwMHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWZvb3RlciB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDEwcHgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWZvb3Rlci1pY29uIHsKICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7CiAgICAgICAgICAgIHdpZHRoOiAyMHB4OwogICAgICAgICAgICBoZWlnaHQ6IDIwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtZm9vdGVyLXRleHQgewogICAgICAgICAgICBmb250LXdlaWdodDogNTAwOwogICAgICAgICAgICBmb250LXNpemU6IC43NWVtCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19yZWFjdGlvbnMgewogICAgICAgICAgICBkaXNwbGF5OiBmbGV4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19yZWFjdGlvbiB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIG1hcmdpbjogNnB4IDJweCAycHg7CiAgICAgICAgICAgIHBhZGRpbmc6IDN4IDZweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19yZWFjdGlvbi1jb3VudCB7CiAgICAgICAgICAgIG1pbi13aWR0aDogOXB4OwogICAgICAgICAgICBtYXJnaW4tbGVmdDogNnB4OwogICAgICAgICAgICBmb250LXNpemU6IC44NzVlbQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fYm90LXRhZyB7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAuM2VtOwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjNzI4OWRhOwogICAgICAgICAgICBjb2xvcjogI2ZmZjsKICAgICAgICAgICAgZm9udC1zaXplOiAuNjI1ZW07CiAgICAgICAgICAgIHBhZGRpbmc6IDFweCAycHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuMzsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICB0b3A6IC0uMmVtCiAgICAgICAgfQogICAgPC9zdHlsZT4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzM2MzkzZTsKICAgICAgICAgICAgY29sb3I6ICNkY2RkZGUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgYSB7CiAgICAgICAgICAgIGNvbG9yOiAjMDA5NmNmCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5zcG9pbGVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAuMSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLnF1b3RlIHsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAjNGY1NDVjCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5wcmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMmYzMTM2IWltcG9ydGFudAogICAgICAgIH0KICAgICAgICAKICAgICAgICAucHJlLS1tdWx0aWxpbmUgewogICAgICAgICAgICBib3JkZXItY29sb3I6ICMyODJiMzAhaW1wb3J0YW50OwogICAgICAgICAgICBjb2xvcjogIzgzOTQ5NiFpbXBvcnRhbnQKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLm1lbnRpb24gewogICAgICAgICAgICBjb2xvcjogIzcyODlkYQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5mb19fZ3VpbGQtbmFtZSB7CiAgICAgICAgICAgIGNvbG9yOiAjZmZmCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5pbmZvX19jaGFubmVsLW5hbWUgewogICAgICAgICAgICBjb2xvcjogI2ZmZgogICAgICAgIH0KICAgICAgICAKICAgICAgICAuaW5mb19fY2hhbm5lbC10b3BpYyB7CiAgICAgICAgICAgIGNvbG9yOiAjZmZmCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19tZXNzYWdlLWdyb3VwIHsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIC4xKQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fYXV0aG9yLW5hbWUgewogICAgICAgICAgICBjb2xvcjogI2ZmZgogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fdGltZXN0YW1wIHsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjIpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIC5jaGF0bG9nX19tZXNzYWdlLS1oaWdobGlnaHRlZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTE0LCAxMzcsIDIxOCwgLjIpIWltcG9ydGFudAogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fbWVzc2FnZS0tcGlubmVkIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNDksIDE2OCwgMzcsIC4wNSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VkaXRlZC10aW1lc3RhbXAgewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAuMikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWNvbnRlbnQtY29udGFpbmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg0NiwgNDgsIDU0LCAuMyk7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogcmdiYSg0NiwgNDgsIDU0LCAuNikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWF1dGhvci1uYW1lIHsKICAgICAgICAgICAgY29sb3I6ICNmZmYKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWF1dGhvci1uYW1lLWxpbmsgewogICAgICAgICAgICBjb2xvcjogI2ZmZgogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtdGl0bGUgewogICAgICAgICAgICBjb2xvcjogI2ZmZgogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtZGVzY3JpcHRpb24gewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAuNikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWZpZWxkLW5hbWUgewogICAgICAgICAgICBjb2xvcjogI2ZmZgogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fZW1iZWQtZmllbGQtdmFsdWUgewogICAgICAgICAgICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAuNikKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX2VtYmVkLWZvb3RlciB7CiAgICAgICAgICAgIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIC42KQogICAgICAgIH0KICAgICAgICAKICAgICAgICAuY2hhdGxvZ19fcmVhY3Rpb24gewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIC4wNSkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmNoYXRsb2dfX3JlYWN0aW9uLWNvdW50IHsKICAgICAgICAgICAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgLjMpCiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgoKPGJvZHk+",
      "base64"
    ).toString("ascii");
    message.channel.fetchMessages().then(messages => {
      messages.forEach(msg => {
        let html =
          html +
          `<div class=chatlog__message id=message-${msg.id} data-message-id=${msg.id}>
                    <div class=chatlog__content><span class=markdown>${msg.content}</span></div>
                    <div class=chatlog__reactions>
                        <div class=chatlog__reactions></div>
                    </div>
                </div>`;

        html = html + "</div></body></html>";
        fs.appendFile(`/logs/${Date.now()}-logs.html`, html, function(err) {
          if (err) throw err;
        });
        console.log("succes");
      });
    });
  }
};
